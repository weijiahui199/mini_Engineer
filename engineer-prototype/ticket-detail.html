<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å•è¯¦æƒ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .priority-urgent { 
            background-color: #ff4d4f; 
            color: white;
        }
        .priority-high { 
            background-color: #faad14; 
            color: white;
        }
        .priority-medium { 
            background-color: #1890ff; 
            color: white;
        }
        .priority-low { 
            background-color: #52c41a; 
            color: white;
        }
        
        .status-pending { background-color: #faad14; color: white; }
        .status-processing { background-color: #1890ff; color: white; }
        .status-resolved { background-color: #52c41a; color: white; }
        .status-closed { background-color: #8c8c8c; color: white; }
        
        .timeline-item {
            position: relative;
            padding-left: 24px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 8px;
            width: 8px;
            height: 8px;
            background-color: #1890ff;
            border-radius: 50%;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            left: 11px;
            top: 16px;
            width: 2px;
            height: calc(100% - 8px);
            background-color: #e8e8e8;
        }
        
        .timeline-item:last-child::after {
            display: none;
        }
        
        .attachment-item {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .material-chip {
            background: #e6f7ff;
            color: #1890ff;
            border: 1px solid #91d5ff;
            border-radius: 16px;
            padding: 4px 12px;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            margin-right: 8px;
            margin-bottom: 4px;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 1000;
        }
        
        .modal-content {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            max-width: 400px;
            margin: 0 auto;
            animation: slide-up 0.3s ease-out;
        }
        
        @keyframes slide-up {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .material-input-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid transparent;
        }
        
        .material-input-item.selected {
            border-color: #1890ff;
            background: #f0f9ff;
        }
        
        .quick-material-btn {
            background: #e6f7ff;
            border: 1px dashed #91d5ff;
            color: #1890ff;
            border-radius: 8px;
            padding: 8px 12px;
            margin: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quick-material-btn:hover {
            background: #bae7ff;
            border-color: #40a9ff;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- å¯¼èˆªæ  -->
    <div class="bg-white px-4 py-3 shadow-sm">
        <div class="flex items-center justify-between">
            <button class="p-2 -ml-2">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <h1 class="text-lg font-semibold text-gray-800">#TK001215</h1>
            <button class="p-2 -mr-2">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- å·¥å•å¤´éƒ¨ä¿¡æ¯ -->
    <div class="bg-white px-4 py-4 border-b">
        <div class="flex items-start justify-between mb-3">
            <div class="flex items-center">
                <span class="priority-urgent px-2 py-1 rounded text-sm mr-2">ç´§æ€¥</span>
                <span class="status-processing px-2 py-1 rounded text-sm">å¤„ç†ä¸­</span>
            </div>
            <div class="text-right text-sm text-gray-600">
                <div>ğŸ“… 2024-12-13 09:30</div>
                <div>â° 2å°æ—¶å‰</div>
            </div>
        </div>
        
        <h2 class="text-xl font-semibold text-gray-800 mb-3">ç”µè„‘æ— æ³•å¼€æœº</h2>
        
        <div class="space-y-2 text-sm">
            <div class="flex items-center">
                <span class="w-6 text-center">ğŸ‘¤</span>
                <span class="ml-2 text-gray-700">å¼ ä¸‰ | è´¢åŠ¡éƒ¨</span>
            </div>
            <div class="flex items-center">
                <span class="w-6 text-center">ğŸ“</span>
                <span class="ml-2 text-gray-700">138****8000</span>
            </div>
            <div class="flex items-center">
                <span class="w-6 text-center">ğŸ“</span>
                <span class="ml-2 text-gray-700">è¡Œæ”¿æ¥¼4æ¥¼405å®¤</span>
            </div>
            <div class="flex items-center">
                <span class="w-6 text-center">ğŸ‘¨â€ğŸ”§</span>
                <span class="ml-2 text-gray-700">åˆ†é…ç»™: æå·¥ç¨‹å¸ˆ</span>
            </div>
        </div>
    </div>

    <!-- é—®é¢˜æè¿° -->
    <div class="bg-white px-4 py-4 mb-2">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
            <span class="mr-2">ğŸ“</span>
            é—®é¢˜æè¿°
        </h3>
        <div class="bg-gray-50 p-3 rounded-lg text-gray-700 leading-relaxed">
            æ˜¨å¤©ä¸‹ç­å‰ç”µè„‘è¿˜æ­£å¸¸ä½¿ç”¨ï¼Œä»Šå¤©æ—©ä¸Šæ¥ä¸Šç­æŒ‰å¼€æœºé”®æ²¡æœ‰ä»»ä½•ååº”ï¼Œç”µæºæŒ‡ç¤ºç¯ä¹Ÿä¸äº®ã€‚æ£€æŸ¥äº†ç”µæºçº¿è¿æ¥æ­£å¸¸ï¼Œä½†æ˜¯ä¸»æœºå®Œå…¨æ²¡æœ‰å“åº”ã€‚å¸Œæœ›èƒ½å°½å¿«å¤„ç†ï¼Œå› ä¸ºæœ‰é‡è¦çš„è´¢åŠ¡æŠ¥è¡¨éœ€è¦å®Œæˆã€‚
        </div>
    </div>

    <!-- é™„ä»¶ -->
    <div class="bg-white px-4 py-4 mb-2">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
            <span class="mr-2">ğŸ“</span>
            é™„ä»¶ (3)
        </h3>
        <div class="flex flex-wrap">
            <div class="attachment-item">
                <span class="text-blue-500 mr-2">ğŸ–¼ï¸</span>
                <span class="text-sm text-gray-700">ç”µè„‘ç°çŠ¶.jpg</span>
            </div>
            <div class="attachment-item">
                <span class="text-green-500 mr-2">ğŸ“„</span>
                <span class="text-sm text-gray-700">é”™è¯¯æ—¥å¿—.txt</span>
            </div>
            <div class="attachment-item">
                <span class="text-blue-500 mr-2">ğŸ–¼ï¸</span>
                <span class="text-sm text-gray-700">ç”µæºè¿æ¥.jpg</span>
            </div>
        </div>
    </div>

    <!-- å¤„ç†è®°å½• -->
    <div class="bg-white px-4 py-4 mb-2">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
            <span class="mr-2">ğŸ’¬</span>
            å¤„ç†è®°å½•
        </h3>
        
        <div class="space-y-4">
            <!-- å¤„ç†è®°å½•é¡¹ -->
            <div class="timeline-item">
                <div class="bg-blue-50 p-3 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-medium text-gray-800">æå·¥ç¨‹å¸ˆ</span>
                        <span class="text-sm text-gray-500">10:15</span>
                    </div>
                    <p class="text-gray-700 text-sm mb-2">å·²åˆ°è¾¾ç°åœºå¼€å§‹æ£€æŸ¥ï¼Œåˆæ­¥åˆ¤æ–­å¯èƒ½æ˜¯ç”µæºæˆ–ä¸»æ¿é—®é¢˜ã€‚</p>
                    <div class="flex items-center text-xs text-gray-500">
                        <span class="mr-3">ğŸ“ ç°åœºå¤„ç†</span>
                        <span>â±ï¸ è€—æ—¶: 15åˆ†é’Ÿ</span>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="bg-orange-50 p-3 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-medium text-gray-800">æå·¥ç¨‹å¸ˆ</span>
                        <span class="text-sm text-gray-500">10:45</span>
                    </div>
                    <p class="text-gray-700 text-sm mb-2">æ›´æ¢ç”µæºçº¿åä»æ— ååº”ï¼Œå‡†å¤‡æ£€æŸ¥ä¸»æ¿ç”µæºæ¥å£ã€‚</p>
                    <div class="mb-2">
                        <span class="text-xs text-gray-600 block mb-1">ä½¿ç”¨è€—æ:</span>
                        <div class="flex flex-wrap">
                            <span class="material-chip">ç”µæºçº¿ Ã— 1æ ¹</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="bg-green-50 p-3 rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-medium text-gray-800">æå·¥ç¨‹å¸ˆ</span>
                        <span class="text-sm text-gray-500">11:20</span>
                    </div>
                    <p class="text-gray-700 text-sm mb-2">å‘ç°ä¸»æ¿ç”µæºæ¥å£æ¾åŠ¨ï¼Œé‡æ–°è¿æ¥åç”µè„‘æ­£å¸¸å¼€æœºã€‚é—®é¢˜å·²è§£å†³ï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤ã€‚</p>
                    <div class="flex items-center text-xs text-green-600">
                        <span class="mr-3">âœ… é—®é¢˜å·²è§£å†³</span>
                        <span>â±ï¸ æ€»è€—æ—¶: 1å°æ—¶5åˆ†é’Ÿ</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ·»åŠ è®°å½•æŒ‰é’® -->
        <div class="flex justify-center mt-4 space-x-3">
            <button class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm flex items-center">
                <span class="mr-1">ğŸ’¬</span>
                æ·»åŠ è®°å½•
            </button>
            <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm flex items-center">
                <span class="mr-1">ğŸ“·</span>
                æ‹ç…§
            </button>
            <button class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm flex items-center">
                <span class="mr-1">ğŸ¤</span>
                è¯­éŸ³
            </button>
        </div>
    </div>

    <!-- çŠ¶æ€å†å² -->
    <div class="bg-white px-4 py-4 mb-2">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
            <span class="mr-2">ğŸ“Š</span>
            çŠ¶æ€å†å²
        </h3>
        
        <div class="space-y-3">
            <div class="flex items-center justify-between py-2 border-b border-gray-100">
                <div class="flex items-center">
                    <span class="status-resolved px-2 py-1 rounded text-xs mr-3">å·²è§£å†³</span>
                    <span class="text-sm text-gray-700">é—®é¢˜å·²ä¿®å¤ï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤</span>
                </div>
                <div class="text-xs text-gray-500">
                    <div>11:20</div>
                    <div>æå·¥ç¨‹å¸ˆ</div>
                </div>
            </div>
            
            <div class="flex items-center justify-between py-2 border-b border-gray-100">
                <div class="flex items-center">
                    <span class="status-processing px-2 py-1 rounded text-xs mr-3">å¤„ç†ä¸­</span>
                    <span class="text-sm text-gray-700">å·¥ç¨‹å¸ˆæ­£åœ¨ç°åœºå¤„ç†</span>
                </div>
                <div class="text-xs text-gray-500">
                    <div>10:15</div>
                    <div>æå·¥ç¨‹å¸ˆ</div>
                </div>
            </div>
            
            <div class="flex items-center justify-between py-2 border-b border-gray-100">
                <div class="flex items-center">
                    <span class="status-pending px-2 py-1 rounded text-xs mr-3">å¾…å¤„ç†</span>
                    <span class="text-sm text-gray-700">å·¥å•å·²åˆ†é…ï¼Œç­‰å¾…å¤„ç†</span>
                </div>
                <div class="text-xs text-gray-500">
                    <div>09:45</div>
                    <div>ç³»ç»Ÿ</div>
                </div>
            </div>
            
            <div class="flex items-center justify-between py-2">
                <div class="flex items-center">
                    <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs mr-3">å·²æäº¤</span>
                    <span class="text-sm text-gray-700">ç”¨æˆ·æäº¤å·¥å•</span>
                </div>
                <div class="text-xs text-gray-500">
                    <div>09:30</div>
                    <div>å¼ ä¸‰</div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t px-4 py-3 max-w-sm mx-auto">
        <div class="flex space-x-2">
            <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg text-sm font-medium" onclick="showMaterialModal('pause')">
                æš‚åœå¤„ç†
            </button>
            <button class="flex-1 bg-blue-500 text-white py-3 rounded-lg text-sm font-medium">
                ç»§ç»­å¤„ç†
            </button>
            <button class="bg-green-500 text-white px-4 py-3 rounded-lg text-sm font-medium" onclick="showMaterialModal('complete')">
                å®Œæˆ
            </button>
        </div>
        
        <div class="flex justify-center mt-2 space-x-4">
            <button class="text-orange-500 text-sm flex items-center">
                <span class="mr-1">ğŸ¤</span>
                ç”³è¯·ååŠ©
            </button>
            <button class="text-blue-500 text-sm flex items-center" onclick="showMaterialModal('record')">
                <span class="mr-1">ğŸ“¦</span>
                è®°å½•è€—æ
            </button>
        </div>
    </div>

    <!-- è€—æå¼¹çª— -->
    <div id="materialModal" class="modal-overlay" onclick="hideMaterialModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="p-4">
                <!-- å¼¹çª—å¤´éƒ¨ -->
                <div class="flex items-center justify-between mb-4">
                    <h3 id="modalTitle" class="text-lg font-semibold text-gray-800">è®°å½•è€—æä½¿ç”¨</h3>
                    <button onclick="hideMaterialModal()" class="p-2 -mr-2">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- å·¥å•ä¿¡æ¯ -->
                <div class="bg-blue-50 p-3 rounded-lg mb-4">
                    <div class="text-sm text-blue-800 font-medium">#TK001215 ç”µè„‘æ— æ³•å¼€æœº</div>
                    <div class="text-xs text-blue-600 mt-1">ğŸ“ è¡Œæ”¿æ¥¼4æ¥¼405å®¤ | ğŸ‘¤ å¼ ä¸‰</div>
                </div>
                
                <!-- å·²æ·»åŠ çš„è€—æ -->
                <div id="materialList" class="mb-4">
                    <div class="text-sm font-medium text-gray-800 mb-2">ä½¿ç”¨çš„è€—æ</div>
                    <!-- è€—æé¡¹ç›®ä¼šé€šè¿‡JavaScriptæ·»åŠ  -->
                </div>
                
                <!-- å¿«é€Ÿæ·»åŠ å¸¸ç”¨è€—æ -->
                <div class="mb-4">
                    <div class="text-sm font-medium text-gray-800 mb-2">å¸¸ç”¨è€—æ</div>
                    <div class="flex flex-wrap">
                        <button class="quick-material-btn" onclick="addQuickMaterial('ç½‘çº¿', 'ç±³')">ğŸ”Œ ç½‘çº¿</button>
                        <button class="quick-material-btn" onclick="addQuickMaterial('èºä¸åŒ…', 'å¥—')">ğŸ”§ èºä¸åŒ…</button>
                        <button class="quick-material-btn" onclick="addQuickMaterial('æ‰“å°çº¸', 'åŒ…')">ğŸ–¨ï¸ æ‰“å°çº¸</button>
                        <button class="quick-material-btn" onclick="addQuickMaterial('å¢¨ç›’', 'ä¸ª')">ğŸ–¤ å¢¨ç›’</button>
                        <button class="quick-material-btn" onclick="addQuickMaterial('ç”µæºçº¿', 'æ ¹')">ğŸ”Œ ç”µæºçº¿</button>
                        <button class="quick-material-btn" onclick="addQuickMaterial('æ•°æ®çº¿', 'æ ¹')">ğŸ“± æ•°æ®çº¿</button>
                    </div>
                </div>
                
                <!-- è‡ªå®šä¹‰æ·»åŠ  -->
                <div class="mb-6">
                    <div class="text-sm font-medium text-gray-800 mb-2">è‡ªå®šä¹‰è€—æ</div>
                    <div class="grid grid-cols-3 gap-2 mb-2">
                        <input type="text" id="customMaterialName" placeholder="è€—æåç§°" class="px-3 py-2 border border-gray-200 rounded-lg text-sm">
                        <input type="number" id="customMaterialQty" placeholder="æ•°é‡" value="1" class="px-3 py-2 border border-gray-200 rounded-lg text-sm">
                        <select id="customMaterialUnit" class="px-3 py-2 border border-gray-200 rounded-lg text-sm">
                            <option>ä¸ª</option>
                            <option>æ ¹</option>
                            <option>æ¡</option>
                            <option>ç±³</option>
                            <option>å¥—</option>
                            <option>åŒ…</option>
                            <option>å¼ </option>
                        </select>
                    </div>
                    <button onclick="addCustomMaterial()" class="w-full bg-gray-100 text-gray-700 py-2 rounded-lg text-sm">
                        + æ·»åŠ åˆ°æ¸…å•
                    </button>
                </div>
                
                <!-- åº•éƒ¨æŒ‰é’® -->
                <div class="flex space-x-3">
                    <button onclick="hideMaterialModal()" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium">
                        å–æ¶ˆ
                    </button>
                    <button id="confirmButton" onclick="confirmAction()" class="flex-1 bg-blue-500 text-white py-3 rounded-lg font-medium">
                        ç¡®è®¤å¹¶ä¿å­˜
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
    <div class="h-24"></div>

    <script>
        let currentAction = '';
        let materials = [];
        let materialIdCounter = 0;

        function showMaterialModal(action) {
            currentAction = action;
            const modal = document.getElementById('materialModal');
            const title = document.getElementById('modalTitle');
            const button = document.getElementById('confirmButton');
            
            // æ ¹æ®æ“ä½œç±»å‹è®¾ç½®æ ‡é¢˜å’ŒæŒ‰é’®æ–‡å­—
            switch (action) {
                case 'complete':
                    title.textContent = 'å®Œæˆå·¥å• - è®°å½•è€—æ';
                    button.textContent = 'å®Œæˆå·¥å•';
                    button.className = 'flex-1 bg-green-500 text-white py-3 rounded-lg font-medium';
                    break;
                case 'pause':
                    title.textContent = 'æš‚åœå¤„ç† - è®°å½•è€—æ';
                    button.textContent = 'æš‚åœå¹¶ä¿å­˜';
                    button.className = 'flex-1 bg-orange-500 text-white py-3 rounded-lg font-medium';
                    break;
                case 'record':
                    title.textContent = 'è®°å½•è€—æä½¿ç”¨';
                    button.textContent = 'ä¿å­˜è®°å½•';
                    button.className = 'flex-1 bg-blue-500 text-white py-3 rounded-lg font-medium';
                    break;
            }
            
            modal.style.display = 'block';
            renderMaterialList();
        }

        function hideMaterialModal() {
            document.getElementById('materialModal').style.display = 'none';
        }

        function addQuickMaterial(name, unit) {
            const existingIndex = materials.findIndex(m => m.name === name);
            if (existingIndex >= 0) {
                materials[existingIndex].quantity += 1;
            } else {
                materials.push({
                    id: ++materialIdCounter,
                    name: name,
                    quantity: 1,
                    unit: unit,
                    notes: ''
                });
            }
            renderMaterialList();
        }

        function addCustomMaterial() {
            const name = document.getElementById('customMaterialName').value.trim();
            const qty = parseInt(document.getElementById('customMaterialQty').value) || 1;
            const unit = document.getElementById('customMaterialUnit').value;
            
            if (!name) {
                alert('è¯·è¾“å…¥è€—æåç§°');
                return;
            }
            
            materials.push({
                id: ++materialIdCounter,
                name: name,
                quantity: qty,
                unit: unit,
                notes: ''
            });
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('customMaterialName').value = '';
            document.getElementById('customMaterialQty').value = '1';
            
            renderMaterialList();
        }

        function removeMaterial(id) {
            materials = materials.filter(m => m.id !== id);
            renderMaterialList();
        }

        function updateQuantity(id, quantity) {
            const material = materials.find(m => m.id === id);
            if (material) {
                material.quantity = Math.max(1, parseInt(quantity) || 1);
                renderMaterialList();
            }
        }

        function renderMaterialList() {
            const listContainer = document.getElementById('materialList');
            
            if (materials.length === 0) {
                listContainer.innerHTML = '<div class="text-sm font-medium text-gray-800 mb-2">ä½¿ç”¨çš„è€—æ</div><div class="text-sm text-gray-500 text-center py-4">æš‚æ— è€—æè®°å½•</div>';
                return;
            }
            
            let html = '<div class="text-sm font-medium text-gray-800 mb-2">ä½¿ç”¨çš„è€—æ (' + materials.length + 'é¡¹)</div>';
            
            materials.forEach(material => {
                html += `
                    <div class="material-input-item">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center">
                                <span class="text-base mr-2">ğŸ“¦</span>
                                <span class="font-medium text-gray-800">${material.name}</span>
                            </div>
                            <button onclick="removeMaterial(${material.id})" class="text-red-500 text-sm">
                                âœ• ç§»é™¤
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <input type="number" value="${material.quantity}" min="1" 
                                   onchange="updateQuantity(${material.id}, this.value)"
                                   class="w-16 px-2 py-1 border border-gray-200 rounded text-center text-sm">
                            <span class="text-sm text-gray-600">${material.unit}</span>
                        </div>
                    </div>
                `;
            });
            
            listContainer.innerHTML = html;
        }

        function confirmAction() {
            // è¿™é‡Œåº”è¯¥å‘é€æ•°æ®åˆ°æœåŠ¡å™¨
            console.log('Action:', currentAction);
            console.log('Materials:', materials);
            
            switch (currentAction) {
                case 'complete':
                    alert('å·¥å•å·²å®Œæˆï¼Œè€—æè®°å½•å·²ä¿å­˜');
                    break;
                case 'pause':
                    alert('å·¥å•å·²æš‚åœï¼Œè€—æè®°å½•å·²ä¿å­˜');
                    break;
                case 'record':
                    alert('è€—æè®°å½•å·²ä¿å­˜');
                    break;
            }
            
            hideMaterialModal();
        }

        // åˆå§‹åŒ–ä¸€äº›ç¤ºä¾‹æ•°æ®
        materials = [
            { id: 1, name: 'ç½‘çº¿', quantity: 3, unit: 'ç±³', notes: 'æ›´æ¢æŸåçº¿ç¼†' },
            { id: 2, name: 'èºä¸åŒ…', quantity: 1, unit: 'å¥—', notes: 'å›ºå®šè®¾å¤‡' }
        ];
        materialIdCounter = 2;
    </script>
</body>
</html>