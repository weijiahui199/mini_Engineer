/* 申领车页面样式 - 重构版 */

/* TDesign 颜色变量 */
page {
  --td-brand-color: #0052d9;
  --td-success-color: #00a870;
  --td-warning-color: #ed7b2f;
  --td-error-color: #e34d59;
  --td-text-color-primary: #262626;
  --td-text-color-secondary: #8b8b8b;
  --td-bg-color-page: #f3f3f3;
  --td-bg-color-container: #ffffff;
  --td-border-color: #e7e7e7;
  --td-spacer-1: 8rpx;
  --td-spacer-2: 16rpx;
  --td-spacer-3: 24rpx;
  --td-spacer-4: 32rpx;
  --td-radius: 16rpx;
  --td-radius-small: 8rpx;
  
  background-color: var(--td-bg-color-page);
}

/* 主容器 - Flex布局 */
.cart-page {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: var(--td-bg-color-page);
}

/* 固定顶部 */
.cart-header {
  flex: 0 0 auto;
  background-color: var(--td-bg-color-container);
  border-bottom: 1rpx solid var(--td-border-color);
  padding-top: env(safe-area-inset-top);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--td-spacer-3) var(--td-spacer-4);
}

.header-title {
  font-size: 36rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
}

.header-action {
  font-size: 28rpx;
  color: var(--td-brand-color);
}

/* 提示信息栏 */
.info-banner {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  padding: var(--td-spacer-2) var(--td-spacer-4);
  background-color: #ecf2fe;
}

.info-icon {
  width: 36rpx;
  height: 36rpx;
  margin-right: var(--td-spacer-2);
  flex-shrink: 0;
}

.info-text {
  font-size: 24rpx;
  color: var(--td-brand-color);
  line-height: 1.5;
}

/* 滚动内容区 */
.cart-body {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* 全选栏 */
.select-all-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--td-spacer-1) var(--td-spacer-4);
  background-color: var(--td-bg-color-container);
  margin-bottom: var(--td-spacer-2);
  min-height: 72rpx;
}

.select-all-left {
  flex: 1;
}

/* 自定义checkbox样式 */
.custom-checkbox {
  width: 40rpx;
  height: 40rpx;
  border: 2rpx solid #d9d9d9;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: var(--td-spacer-2);
  transition: all 0.2s;
}

.custom-checkbox.checked {
  border-color: transparent;
  background-color: transparent;
}

.custom-checkbox .check-icon {
  width: 40rpx;
  height: 40rpx;
}

/* 全选栏文字 */
.select-all-left {
  display: flex;
  align-items: center;
}

.select-all-text {
  font-size: 26rpx;
  color: var(--td-text-color-primary);
}

/* 清空购物车按钮 */
.clear-cart-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 60rpx;
  height: 60rpx;
  border-radius: 50%;
  transition: all 0.2s;
}

.clear-cart-btn:active {
  background-color: rgba(227, 77, 89, 0.1);
}

.clear-cart-icon {
  width: 40rpx;
  height: 40rpx;
}


/* 购物车列表 */
.cart-list {
  padding: 0 var(--td-spacer-4);
}

/* 购物车项 */
.cart-item {
  display: flex;
  align-items: flex-start;
  padding: var(--td-spacer-3);
  background-color: var(--td-bg-color-container);
  border-radius: var(--td-radius);
  margin-bottom: var(--td-spacer-3);
}

.cart-item.warning-border {
  border-left: 8rpx solid var(--td-warning-color);
}

.item-image {
  width: 160rpx;
  height: 160rpx;
  border-radius: var(--td-radius-small);
  margin-right: var(--td-spacer-3);
  background-color: #f5f5f5;
}

.item-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 160rpx;
}

.item-header {
  margin-bottom: var(--td-spacer-2);
}

.item-title {
  font-size: 30rpx;
  color: var(--td-text-color-primary);
  font-weight: 500;
  display: block;
  margin-bottom: var(--td-spacer-1);
}

.item-variant {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  display: block;
}

.item-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
}

.stock-info {
  display: flex;
  flex-direction: column;
  gap: var(--td-spacer-1);
}

.stock-label {
  font-size: 26rpx;
  color: var(--td-text-color-secondary);
}

.stock-label.warning-text {
  color: var(--td-warning-color);
  font-weight: 500;
}

.stock-warning {
  font-size: 22rpx;
  color: var(--td-warning-color);
}

/* 空状态 */
.empty-state {
  padding: 120rpx var(--td-spacer-4);
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 功能区域卡片 */
.section-card {
  background-color: var(--td-bg-color-container);
  margin: var(--td-spacer-3) 0;
  padding: var(--td-spacer-3) var(--td-spacer-4);
}

/* 已选工单样式 */
.ticket-selected {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: var(--td-spacer-2);
}

.ticket-card {
  flex: 1;
  padding: var(--td-spacer-2);
  background-color: #ecf2fe;
  border-radius: var(--td-radius-small);
  border: 2rpx solid var(--td-brand-color);
}

.ticket-header {
  display: flex;
  align-items: center;
  gap: var(--td-spacer-2);
  margin-bottom: var(--td-spacer-1);
}

.ticket-no {
  font-size: 28rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
}

.ticket-title {
  font-size: 26rpx;
  color: var(--td-text-color-secondary);
  display: block;
  margin-bottom: var(--td-spacer-1);
}

.ticket-submitter {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  display: block;
}

.remove-icon {
  width: 40rpx;
  height: 40rpx;
  padding: var(--td-spacer-2);
}

/* 快速选择工单 */
.quick-tickets {
  margin-top: var(--td-spacer-2);
  width: 100%;
  align-self: flex-start;
}

.quick-label {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  display: block;
  margin-bottom: var(--td-spacer-2);
}

.quick-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--td-spacer-2);
  margin-bottom: var(--td-spacer-3);
}

.quick-tag {
  margin-right: var(--td-spacer-2);
  margin-bottom: var(--td-spacer-2);
}

/* 未选工单容器 */
.ticket-empty {
  padding: var(--td-spacer-3) 0;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

/* 选择工单按钮图标 */
.btn-icon {
  width: 32rpx;
  height: 32rpx;
  margin-right: 8rpx;
}

/* 快速选择工单列表 */
.quick-ticket-list {
  margin-top: 16rpx;
  margin-bottom: 24rpx;
  width: 100%;
}

/* 快速选择工单卡片 - 类似耗材卡片 */
.quick-ticket-card {
  display: flex;
  align-items: center;
  background: var(--td-bg-color-container);
  border-radius: 16rpx;
  padding: 24rpx;
  margin-bottom: 16rpx;
  border: 2rpx solid transparent;
  transition: all 0.3s ease;
}

/* 选中状态 */
.quick-ticket-active {
  background: #ecf2fe;
  border-color: #4A8DD4;
  box-shadow: 0 4rpx 16rpx rgba(74, 141, 212, 0.1);
}

/* 工单选中框 */
.ticket-checkbox {
  width: 40rpx;
  height: 40rpx;
  border: 2rpx solid var(--td-border-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20rpx;
  transition: all 0.2s ease;
}

.ticket-checkbox.checked {
  background: #4A8DD4;
  border-color: #4A8DD4;
}

/* 工单图标容器 */
.ticket-icon-wrapper {
  width: 80rpx;
  height: 80rpx;
  background: #f0f0f0;
  border-radius: 12rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 24rpx;
}

.quick-ticket-active .ticket-icon-wrapper {
  background: #e6f0ff;
}

/* 工单图标 */
.ticket-icon {
  width: 48rpx;
  height: 48rpx;
}

/* 工单信息 */
.ticket-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12rpx;
}

/* 工单主要信息行 */
.ticket-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* 工单标题 */
.ticket-title-text {
  flex: 1;
  font-size: 30rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-right: 16rpx;
}

/* 工单元信息 */
.ticket-meta {
  display: flex;
  align-items: center;
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
}

/* 工单号 */
.ticket-no-text {
  font-weight: 500;
}

/* 分隔符 */
.ticket-separator {
  margin: 0 12rpx;
  color: var(--td-text-color-placeholder);
}

/* 报修人 */
.ticket-submitter-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 备注区域 */
.remark-wrapper {
  padding: var(--td-spacer-2) 0;
}

/* 自定义textarea样式 */
.custom-textarea {
  background-color: #f5f5f5 !important;
  border-radius: 12rpx !important;
  padding: 20rpx !important;
}

/* 自定义字数统计样式 */
.custom-indicator {
  font-size: 32rpx !important;
  color: #666666 !important;
  font-weight: 600 !important;
  margin-top: 16rpx !important;
  display: block !important;
}

/* 底部占位 */
.bottom-safe-area {
  height: 200rpx;
}

/* 工单选择弹窗 */
.ticket-selector {
  height: 80vh;
  background: var(--td-bg-color-container);
  border-radius: 24rpx 24rpx 0 0;
  display: flex;
  flex-direction: column;
}

/* 弹窗头部 */
.selector-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 32rpx;
  border-bottom: 1rpx solid var(--td-border-color);
}

.selector-title {
  font-size: 32rpx;
  font-weight: 600;
  color: var(--td-text-color-primary);
}

.close-icon {
  width: 40rpx;
  height: 40rpx;
  padding: 8rpx;
}

/* 搜索栏 */
.selector-search {
  padding: 24rpx 32rpx;
  background: var(--td-bg-color-container);
}

/* 自定义搜索框 */
.custom-search {
  display: flex;
  align-items: center;
  height: 72rpx;
  background: #f5f5f5;
  border-radius: 36rpx;
  padding: 0 24rpx;
}

.search-icon {
  width: 32rpx;
  height: 32rpx;
  margin-right: 16rpx;
  opacity: 0.5;
}

.search-input {
  flex: 1;
  font-size: 28rpx;
  color: var(--td-text-color-primary);
  background: transparent;
}

.clear-icon {
  width: 32rpx;
  height: 32rpx;
  padding: 8rpx;
  margin-left: 8rpx;
}

/* 工单列表 */
.ticket-list {
  flex: 1;
  padding: 0 32rpx;
  overflow-y: auto;
}

/* 工单选择项 */
.ticket-select-item {
  display: flex;
  align-items: flex-start;
  padding: 24rpx 0;
  border-bottom: 1rpx solid var(--td-border-level-1-color);
}

.ticket-select-item:last-child {
  border-bottom: none;
}

/* 工单项内容 */
.ticket-item-content {
  flex: 1;
  margin-left: 20rpx;
}

.ticket-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12rpx;
}

.ticket-item-no {
  font-size: 30rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
}

.ticket-item-title {
  font-size: 28rpx;
  color: var(--td-text-color-primary);
  line-height: 1.5;
  margin-bottom: 8rpx;
}

.ticket-item-note {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  line-height: 1.4;
}

.ticket-item-desc {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  margin-top: 8rpx;
}

/* 无结果提示 */
.no-result {
  padding: 80rpx 32rpx;
  text-align: center;
}

/* 弹窗底部按钮 */
.selector-footer {
  padding: 24rpx 32rpx;
  border-top: 1rpx solid var(--td-border-color);
  padding-bottom: env(safe-area-inset-bottom);
}

/* 固定底部结算栏 */
.cart-footer {
  flex: 0 0 auto;
  background-color: var(--td-bg-color-container);
  border-top: 1rpx solid var(--td-border-color);
  padding-bottom: env(safe-area-inset-bottom);
  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.04);
}

.footer-content {
  padding: var(--td-spacer-3) var(--td-spacer-4);
}

.footer-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--td-spacer-3);
}

.selected-text {
  font-size: 28rpx;
  color: var(--td-text-color-secondary);
}

.price-info {
  display: flex;
  align-items: baseline;
  gap: var(--td-spacer-1);
}

.price-label {
  font-size: 28rpx;
  color: var(--td-text-color-secondary);
}

.price-value {
  font-size: 36rpx;
  color: var(--td-error-color);
  font-weight: 600;
}

.footer-actions {
  display: flex;
  justify-content: space-between;
  gap: var(--td-spacer-3);
}

/* 继续添加按钮 - 左对齐 */
.continue-btn {
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);
}

/* 提交申领按钮 - 右对齐 */
.submit-btn {
  box-shadow: 0 4rpx 16rpx rgba(74, 141, 212, 0.25);
  margin-left: auto;
}

.footer-actions t-button {
  flex: 1;
}

/* 工单选择弹窗 */
.ticket-selector {
  background-color: var(--td-bg-color-container);
  border-radius: var(--td-radius) var(--td-radius) 0 0;
  max-height: 70vh;
  display: flex;
  flex-direction: column;
}

.selector-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--td-spacer-3) var(--td-spacer-4);
  border-bottom: 1rpx solid var(--td-border-color);
}

.selector-title {
  font-size: 32rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
}

.close-icon {
  width: 48rpx;
  height: 48rpx;
  padding: var(--td-spacer-2);
}

.selector-search {
  padding: var(--td-spacer-3) var(--td-spacer-4);
  border-bottom: 1rpx solid var(--td-border-color);
}

.ticket-list {
  flex: 1;
  overflow-y: auto;
  min-height: 400rpx;
  max-height: 50vh;
  padding: var(--td-spacer-2) 0;
}

/* 工单选择项 */
.ticket-select-item {
  display: flex;
  align-items: flex-start;
  padding: var(--td-spacer-3) var(--td-spacer-4);
  background-color: var(--td-bg-color-container);
  border-bottom: 1rpx solid #f0f0f0;
  transition: background-color 0.2s;
}

.ticket-select-item:active {
  background-color: #f5f5f5;
}

.ticket-item-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--td-spacer-1);
}

.ticket-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--td-spacer-1);
}

.ticket-item-no {
  font-size: 30rpx;
  font-weight: 500;
  color: var(--td-text-color-primary);
}

.ticket-item-title {
  font-size: 28rpx;
  color: var(--td-text-color-primary);
  line-height: 1.4;
}

.ticket-item-note {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  line-height: 1.4;
}

.ticket-item-desc {
  font-size: 24rpx;
  color: var(--td-text-color-secondary);
  margin-top: var(--td-spacer-1);
}

.no-result {
  padding: 80rpx var(--td-spacer-4);
}

.selector-footer {
  padding: var(--td-spacer-3) var(--td-spacer-4);
  border-top: 1rpx solid var(--td-border-color);
  padding-bottom: env(safe-area-inset-bottom);
}

/* 左滑删除按钮样式 */
.swipe-delete-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100rpx;
  height: 100%;
  background-color: #ff6b6b;
  border-radius: 0 16rpx 16rpx 0;
  margin-right: 16rpx;
}

.swipe-delete-icon {
  width: 40rpx;
  height: 40rpx;
  filter: brightness(0) invert(1);  /* 将图标变为白色 */
}

/* 动画效果 */
.cart-item,
.section-card,
.ticket-card {
  transition: all 0.3s ease;
}

.cart-item:active {
  transform: scale(0.98);
  opacity: 0.9;
}

