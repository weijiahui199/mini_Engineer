# 工单系统测试计划

> 文档创建时间：2025-01-16  
> 版本：v1.0  
> 测试环境：微信开发者工具

## 📋 测试准备

### 测试账号准备
| 角色 | 账号 | 说明 |
|------|------|------|
| 普通用户 | user001 | 只能创建和查看自己的工单 |
| 工程师A | engineer001 | 可以接单和处理工单 |
| 工程师B | engineer002 | 用于测试并发接单 |
| 经理 | manager001 | 可以查看所有工单和统计 |

### 测试数据准备
- 创建10个不同状态的工单
- 包含不同优先级（紧急、高、中、低）
- 包含不同类型（硬件、软件、网络等）
- 分布在不同时间段

## 🧪 测试用例

### TC001：工单创建流程
**前置条件**：使用普通用户账号登录

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击"创建工单"按钮 | 进入工单创建页面 |
| 2 | 不填写任何内容，点击提交 | 显示必填字段提示 |
| 3 | 填写必填字段 | 表单验证通过 |
| 4 | 上传附件 | 附件上传成功 |
| 5 | 点击提交 | 显示"处理中"loading |
| 6 | 提交成功 | 显示工单号，跳转到详情页 |
| 7 | 快速连续点击提交 | 防重复提交机制生效 |

**检查点**：
- ✓ 工单号格式正确
- ✓ 数据保存到数据库
- ✓ 工单状态为"pending"

### TC002：工单池展示（工程师视角）
**前置条件**：使用工程师账号登录

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入工单列表页 | 显示工单池和我的工单 |
| 2 | 查看待接单标签 | 未分配工单显示"待接单"标签 |
| 3 | 查看已被接单工单 | 显示"已被接单"提示 |
| 4 | 查看我的工单 | 显示蓝色标记 |
| 5 | 下拉刷新 | 列表更新 |

**检查点**：
- ✓ 工单池工单正确显示
- ✓ 不显示其他工程师的工单
- ✓ 标记和颜色正确

### TC003：并发接单测试
**前置条件**：两个工程师账号同时操作

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 工程师A和B同时打开同一未分配工单 | 都显示"开始处理"按钮 |
| 2 | 同时点击"开始处理" | 都显示loading |
| 3 | 等待处理结果 | 一个成功，一个失败 |
| 4 | 成功的工程师 | 显示"开始处理"成功提示 |
| 5 | 失败的工程师 | 显示"该工单已被其他工程师处理" |
| 6 | 刷新列表 | 工单状态正确更新 |

**检查点**：
- ✓ 只有一个工程师能成功接单
- ✓ 失败提示友好
- ✓ 数据库状态正确

### TC004：工单处理流程
**前置条件**：工程师已接单

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入已接工单详情 | 显示处理操作按钮 |
| 2 | 点击"继续处理" | 状态变为processing |
| 3 | 添加处理备注 | 备注保存成功 |
| 4 | 点击"暂停" | 可以暂停处理 |
| 5 | 点击"完成工单" | 弹出解决方案填写框 |
| 6 | 填写解决方案并提交 | 工单状态变为resolved |

**检查点**：
- ✓ 状态流转正确
- ✓ 时间记录准确
- ✓ 操作日志完整

### TC005：筛选功能测试
**前置条件**：有多个不同状态、类型的工单

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击"待处理"标签 | 只显示pending状态工单 |
| 2 | 点击"紧急"标签 | 只显示紧急优先级工单 |
| 3 | 打开高级筛选 | 显示筛选弹窗 |
| 4 | 选择"硬件故障"类型 | 应用筛选，只显示硬件工单 |
| 5 | 多选优先级"高"和"紧急" | 显示高和紧急优先级工单 |
| 6 | 选择时间"今天" | 只显示今天创建的工单 |
| 7 | 点击重置 | 清除所有筛选条件 |
| 8 | 组合多个筛选条件 | 结果正确 |

**检查点**：
- ✓ 单一筛选正确
- ✓ 组合筛选正确
- ✓ 筛选计数准确

### TC006：搜索功能测试
**前置条件**：有多个工单

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入工单号搜索 | 精确匹配工单号 |
| 2 | 输入标题关键词 | 模糊匹配标题 |
| 3 | 输入提交人姓名 | 匹配提交人 |
| 4 | 输入不存在的内容 | 显示"暂无数据" |
| 5 | 清空搜索框 | 显示所有工单 |

**检查点**：
- ✓ 搜索响应快速
- ✓ 结果准确
- ✓ 支持中文搜索

### TC007：权限控制测试
**前置条件**：分别使用不同角色账号

| 角色 | 测试点 | 预期结果 |
|------|--------|----------|
| 普通用户 | 查看他人工单 | 无法查看 |
| 普通用户 | 处理工单 | 无处理按钮 |
| 工程师 | 查看他人已接工单 | 无法查看详情 |
| 工程师 | 处理他人工单 | 无操作权限 |
| 经理 | 查看所有工单 | 可以查看 |
| 经理 | 筛选负责人 | 筛选选项可见 |

**检查点**：
- ✓ 权限控制严格
- ✓ 越权操作被拒绝
- ✓ UI根据权限显示

### TC008：Dashboard统计测试
**前置条件**：有多个不同状态的工单

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 查看统计卡片 | 数字准确 |
| 2 | 点击统计卡片 | 跳转到对应筛选列表 |
| 3 | 查看待处理工单 | 只显示pending状态 |
| 4 | 没有待处理时 | 显示"所有任务正在有序处理中" |
| 5 | 刷新Dashboard | 数据更新 |

**检查点**：
- ✓ 统计数据准确
- ✓ 角色统计不同
- ✓ 实时性良好

### TC009：异常情况测试

| 场景 | 操作 | 预期结果 |
|------|------|----------|
| 网络断开 | 提交工单 | 显示网络错误提示 |
| 网络慢 | 加载列表 | 显示loading状态 |
| 数据异常 | 查看不存在的工单 | 显示错误提示 |
| 并发操作 | 多人同时更新 | 最后一个操作生效 |
| 大数据量 | 加载1000条工单 | 分页正常工作 |

**检查点**：
- ✓ 错误提示友好
- ✓ 不会崩溃
- ✓ 可以恢复

### TC010：UI/UX测试

| 测试点 | 检查项 | 标准 |
|--------|--------|------|
| 响应速度 | 页面加载 | <2秒 |
| 交互反馈 | 所有操作 | 有明确反馈 |
| 视觉一致性 | 所有页面 | 风格统一 |
| 移动适配 | 不同机型 | 正常显示 |
| 无障碍 | 字体大小 | 可读性好 |

## 🐛 已知问题追踪

| ID | 问题描述 | 严重程度 | 状态 |
|----|----------|----------|------|
| BUG-001 | assigned字段不存在 | 高 | ✅已修复 |
| BUG-002 | 负责人筛选权限 | 中 | ✅已修复 |
| BUG-003 | 详情页权限检查 | 高 | ✅已修复 |
| BUG-004 | 图标路径错误 | 低 | ✅已修复 |
| BUG-005 | 并发接单保护 | 高 | ✅已修复 |

## 📊 测试报告模板

```markdown
测试日期：2025-01-16
测试人员：[姓名]
测试环境：微信开发者工具 v1.06

### 测试结果汇总
- 总用例数：10
- 通过数：[X]
- 失败数：[X]
- 阻塞数：[X]
- 通过率：[X]%

### 问题清单
1. [问题描述]
   - 严重程度：[高/中/低]
   - 复现步骤：[步骤]
   - 期望结果：[描述]
   - 实际结果：[描述]

### 建议改进
1. [改进建议]
```

## ✅ 测试检查清单

### 功能完整性
- [ ] 工单创建
- [ ] 工单查看
- [ ] 工单接单
- [ ] 工单处理
- [ ] 工单完成
- [ ] 工单搜索
- [ ] 工单筛选
- [ ] 统计展示

### 数据正确性
- [ ] 工单号唯一
- [ ] 状态流转正确
- [ ] 时间记录准确
- [ ] 统计数据准确

### 用户体验
- [ ] 操作流畅
- [ ] 反馈及时
- [ ] 错误提示友好
- [ ] 加载速度合理

### 安全性
- [ ] 权限控制有效
- [ ] 数据不泄露
- [ ] 防重复提交
- [ ] 防并发冲突

---

*测试负责人：QA团队*  
*最后更新：2025-01-16*