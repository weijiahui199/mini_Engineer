/* 申领车页面样式 - 微信小程序设计规范 */

/* ==================== 基础配置 ==================== */
page {
  height: 100%;
  background: #F7F8FA; /* bg.page */
  overflow-x: hidden; /* 防止横向滚动 */
}

.container {
  height: 100vh;
  background: #F7F8FA; /* bg.page */
  display: flex;
  flex-direction: column;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
}

/* ==================== 顶部操作栏 ==================== */
.action-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24rpx 32rpx; /* Page.PaddingX */
  background: #FFFFFF; /* bg.card */
  border-bottom: 1rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  min-height: 88rpx; /* 最小高度 */
}

.cart-count {
  display: flex;
  align-items: baseline;
  gap: 8rpx;
}

.count-label {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 44rpx;
}

.count-value {
  font-size: 40rpx; /* H1 */
  font-weight: 600;
  color: #4A8DD4; /* brand.primary */
  line-height: 56rpx;
}

.count-unit {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  margin-left: 4rpx;
  line-height: 36rpx;
}

.clear-all-btn {
  padding: 12rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 200ms cubic-bezier(0.2,0,0,1);
}

.clear-all-btn:active {
  transform: scale(0.9);
  opacity: 0.6;
}

.clear-icon {
  width: 48rpx;
  height: 48rpx;
}

/* ==================== 内容容器 ==================== */
.content-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
}

/* 信息提示栏 */
.info-banner {
  background: rgba(91, 159, 230, 0.08); /* 主色半透明背景 */
  margin: 0 32rpx 16rpx;
  padding: 20rpx 24rpx;
  display: flex;
  align-items: center;
  border-radius: 12rpx; /* sm */
  border: 1rpx solid rgba(91, 159, 230, 0.2);
}

.info-icon {
  width: 32rpx;
  height: 32rpx;
  margin-right: 12rpx;
  flex-shrink: 0;
}

.info-text {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 36rpx;
}

/* ==================== 主内容滚动区 ==================== */
.content-scroll {
  flex: 1;
  padding: 0 32rpx; /* Page.PaddingX */
  padding-bottom: 160rpx; /* 为底部栏留出空间 */
  width: 100%;
  box-sizing: border-box;
}

/* ==================== 全选卡片 ==================== */
.select-all-card {
  background: #FFFFFF;
  padding: 24rpx 32rpx; /* Card.Padding */
  margin-bottom: 16rpx; /* Card.Gap */
  border-radius: 16rpx; /* md */
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.checkbox-group {
  display: flex;
  align-items: center;
  min-height: 88rpx; /* 触控热区 */
}

.checkbox {
  width: 40rpx;
  height: 40rpx;
  border: 3rpx solid rgba(0, 0, 0, 0.4); /* text.tertiary */
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 200ms cubic-bezier(0.2,0,0,1); /* 动效 */
}

.checkbox.checked {
  background: #4A8DD4; /* brand.primary */
  border-color: #4A8DD4;
}

.check-icon {
  width: 24rpx;
  height: 24rpx;
  filter: brightness(0) invert(1);
}

.checkbox-label {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  margin-left: 16rpx;
  line-height: 44rpx;
}

/* ==================== 列表容器 ==================== */
.list-container {
  margin-bottom: 24rpx;
  width: 100%; /* 确保宽度 */
  box-sizing: border-box;
}

/* 列表项卡片 */
.list-item-card {
  background: #FFFFFF;
  margin-bottom: 16rpx; /* Card.Gap */
  padding: 32rpx; /* Card.Padding */
  border-radius: 16rpx; /* md */
  display: flex;
  align-items: flex-start;
  min-height: 96rpx; /* ListItem.MinHeight */
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
  position: relative;
  transition: all 200ms cubic-bezier(0.2,0,0,1);
  width: 100%; /* 确保卡片宽度 */
  box-sizing: border-box; /* 包含padding */
  overflow: hidden; /* 防止内容溢出 */
}

.list-item-card.warning {
  border: 2rpx solid #FAAD14; /* state.warning */
}

.list-item-card:active {
  transform: scale(0.98);
}

/* 商品图片 */
.item-image {
  width: 112rpx; /* 列表缩略图 */
  height: 112rpx;
  border-radius: 12rpx; /* sm */
  background: #F7F8FA;
  flex-shrink: 0;
  margin: 0 24rpx 0 12rpx;
}

/* 商品内容 */
.item-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0; /* 防止flex子元素溢出 */
  overflow: hidden; /* 防止内容溢出 */
}

.item-title {
  font-size: 32rpx; /* Title */
  font-weight: 600;
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 48rpx;
  margin-bottom: 8rpx;
  overflow: hidden; /* 防止文字溢出 */
  text-overflow: ellipsis; /* 显示省略号 */
  white-space: nowrap; /* 不换行 */
}

.item-caption {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 36rpx;
  margin-bottom: 16rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: auto;
}

/* 库存信息 */
.stock-info {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.stock-label {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 36rpx;
}

.stock-label.warning {
  color: #FAAD14; /* state.warning */
  font-weight: 500;
}

.stock-hint {
  font-size: 24rpx; /* Caption */
  color: #FAAD14; /* state.warning */
  line-height: 36rpx;
}

/* 数量步进器 */
.stepper {
  display: flex;
  align-items: center;
  gap: 16rpx;
}

.stepper-btn {
  width: 64rpx; /* Stepper height */
  height: 64rpx;
  border-radius: 50%;
  background: #F7F8FA;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  padding: 0;
  transition: all 200ms cubic-bezier(0.2,0,0,1);
}

.stepper-plus {
  background: #4A8DD4; /* brand.primary */
}

.stepper-plus .stepper-icon {
  filter: brightness(0) invert(1);
}

.stepper-btn.disabled {
  opacity: 0.4; /* disabled.alpha */
}

.stepper-btn:active:not(.disabled) {
  transform: scale(0.95);
}

.stepper-icon {
  width: 24rpx;
  height: 24rpx;
}

.stepper-input {
  width: 80rpx;
  height: 48rpx;
  text-align: center;
  font-size: 28rpx; /* Body */
  font-weight: 500;
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  background: #F7F8FA;
  border-radius: 8rpx; /* xs */
}

/* 删除按钮 */
.delete-btn {
  position: absolute;
  right: 32rpx;
  top: 32rpx;
  width: 48rpx;
  height: 48rpx;
  display: flex;
  align-items: center;
  justify-content: center;
}

.delete-icon {
  width: 32rpx;
  height: 32rpx;
  opacity: 0.6;
}

/* ==================== 空状态 ==================== */
.empty-state {
  padding: 120rpx 60rpx;
  text-align: center;
  background: #FFFFFF;
  border-radius: 16rpx; /* md */
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
  margin: 24rpx 0;
}

.empty-image {
  width: 200rpx;
  height: 200rpx;
  margin-bottom: 32rpx;
}

.empty-title {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 44rpx;
  margin-bottom: 16rpx;
  display: block;
}

.empty-caption {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 36rpx;
  margin-bottom: 48rpx;
  display: block;
}

/* ==================== Section 卡片 ==================== */
.section-card {
  background: #FFFFFF;
  margin-bottom: 16rpx; /* Card.Gap */
  padding: 32rpx; /* Card.Padding */
  border-radius: 16rpx; /* md */
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx; /* Section 标题下边距 */
}

.section-title {
  font-size: 32rpx; /* Title */
  font-weight: 600;
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 48rpx;
}

.section-caption {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.4); /* text.tertiary */
  line-height: 36rpx;
}

/* 已选工单 */
.ticket-selected {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20rpx;
  background: #F0F7FF; /* 浅蓝色背景 */
  border: 1rpx solid #5B9FE6;
  border-radius: 12rpx; /* sm */
}

.ticket-info {
  flex: 1;
}

.ticket-row {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 8rpx;
}

.ticket-no {
  font-size: 24rpx; /* Caption */
  color: #4A8DD4; /* 蓝色 */
  font-weight: 500;
}

.ticket-body {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 44rpx;
  margin-bottom: 8rpx;
  display: block;
}

.ticket-caption {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 36rpx;
  display: block;
}

.link-text {
  font-size: 28rpx; /* Body */
  color: #5B9FE6; /* 浅蓝色 */
}

/* 状态标签 */
.tag {
  padding: 4rpx 12rpx;
  border-radius: 8rpx; /* xs */
  font-size: 24rpx; /* Caption */
  line-height: 36rpx;
}

.tag-pending {
  background: #FFF3CD;
  color: #92400E;
}

.tag-processing {
  background: #DBEAFE;
  color: #1E40AF;
}

.tag-resolved {
  background: #D1FAE5;
  color: #065F46;
}

.tag-cancelled {
  background: #FEE2E2;
  color: #991B1B;
}

/* 快速选择 */
.quick-select {
  margin-bottom: 24rpx;
}

.quick-list {
  white-space: nowrap;
}

.quick-item {
  display: inline-block;
  background: #FFFFFF;
  border: 1rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  border-radius: 12rpx; /* sm */
  padding: 16rpx 24rpx;
  margin-right: 16rpx;
  transition: all 200ms cubic-bezier(0.2,0,0,1);
}

.quick-item:active {
  background: #F0F7FF;
  border-color: #5B9FE6;
}

.quick-no {
  font-size: 24rpx; /* Caption */
  color: #4A8DD4; /* 蓝色 */
  margin-right: 12rpx;
}

.quick-title {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
}

/* ==================== 输入区域 ==================== */
.textarea-input {
  width: 100%;
  min-height: 160rpx;
  padding: 20rpx;
  background: #F7F8FA;
  border-radius: 12rpx; /* sm */
  font-size: 28rpx; /* Body */
  line-height: 44rpx;
  margin-top: 16rpx;
  box-sizing: border-box;
  color: rgba(0, 0, 0, 0.9); /* text.primary */
}

.input-count {
  position: absolute;
  right: 48rpx;
  bottom: 48rpx;
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.4); /* text.tertiary */
}

/* ==================== 申领须知 ==================== */
.notice-card {
  background: #FFFBF0;
  padding: 24rpx 32rpx;
  margin-bottom: 24rpx;
  border-radius: 16rpx; /* md */
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
}

.notice-header {
  display: flex;
  align-items: center;
  margin-bottom: 16rpx;
}

.notice-icon {
  width: 32rpx;
  height: 32rpx;
  margin-right: 12rpx;
}

.notice-title {
  font-size: 28rpx; /* Body */
  font-weight: 500;
  color: #FAAD14; /* state.warning */
  line-height: 44rpx;
}

.notice-list {
  padding-left: 44rpx;
}

.notice-item {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 40rpx;
  display: block;
  margin-bottom: 8rpx;
}

/* ==================== 底部安全区域 ==================== */
.bottom-safe-area {
  height: 200rpx; /* 留出足够空间避免内容被底部栏遮挡 */
  flex-shrink: 0; /* 防止被压缩 */
}

/* ==================== 底部结算栏 ==================== */
.bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #FFFFFF;
  padding: 24rpx 32rpx; /* Page.PaddingX */
  padding-bottom: calc(24rpx + env(safe-area-inset-bottom));
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.08);
  z-index: 100;
  height: 140rpx; /* 固定高度 */
  box-sizing: border-box;
}

.bottom-info {
  display: flex;
  align-items: center;
  gap: 24rpx;
}

.bottom-text {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 44rpx;
}

.price-group {
  display: flex;
  align-items: baseline;
  gap: 8rpx;
}

.price-label {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
}

.price-value {
  font-size: 36rpx; /* H2 */
  font-weight: 600;
  color: #FA5151; /* state.error */
  line-height: 52rpx;
}

/* ==================== 按钮样式 ==================== */
.btn-primary {
  min-width: 200rpx;
  height: 88rpx; /* Button/Large */
  background: linear-gradient(135deg, #5B9FE6 0%, #4A8DD4 100%); /* brand.primary 渐变 */
  color: #FFFFFF;
  font-size: 32rpx; /* Title */
  font-weight: 500;
  border-radius: 44rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  padding: 0 32rpx; /* Button padding */
  transition: all 200ms cubic-bezier(0.2,0,0,1);
  box-shadow: 0 4rpx 12rpx rgba(74, 141, 212, 0.25); /* 主色阴影 */
}

.btn-primary:active:not(.disabled) {
  transform: scale(0.98);
  opacity: 0.9;
}

.btn-primary.disabled {
  opacity: 0.4; /* disabled.alpha */
}

.btn-outline {
  width: 100%;
  height: 80rpx; /* Button/Medium */
  background: transparent;
  border: 2rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  border-radius: 12rpx; /* sm */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12rpx;
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  transition: all 200ms cubic-bezier(0.2,0,0,1);
}

.btn-outline:active {
  background: rgba(0, 0, 0, 0.04);
}

.btn-icon {
  width: 32rpx;
  height: 32rpx;
}

/* ==================== 底部弹窗 Bottom Sheet ==================== */
.modal-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4); /* 遮罩透明度 0.4 */
  z-index: 999;
  display: flex;
  align-items: flex-end;
  animation: fadeIn 200ms cubic-bezier(0.2,0,0,1); /* 进入 200ms */
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.bottom-sheet {
  width: 100%;
  max-height: 70vh; /* 最大高 70vh */
  background: #FFFFFF;
  border-radius: 24rpx 24rpx 0 0; /* 圆角 24rpx */
  padding-bottom: env(safe-area-inset-bottom);
  animation: slideUp 240ms cubic-bezier(0.2,0,0,1); /* 进入 240ms */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* 防止内容溢出 */
  box-sizing: border-box;
  box-shadow: 0 -8rpx 32rpx rgba(0, 0, 0, 0.1); /* 添加阴影 */
  transition: transform 160ms cubic-bezier(0.2,0,0,1); /* 关闭动画 */
}

@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

/* 把手 */
.sheet-handle-wrapper {
  padding: 16rpx 0;
  display: flex;
  justify-content: center;
  width: 100%;
  box-sizing: border-box;
  cursor: grab; /* 显示可拖动 */
}

.sheet-handle {
  width: 72rpx; /* 把手宽度 72rpx */
  height: 8rpx; /* 把手高度 8rpx */
  background: rgba(0, 0, 0, 0.12); /* 稍深一点 */
  border-radius: 4rpx;
  transition: background 200ms;
}

.sheet-handle-wrapper:active .sheet-handle {
  background: rgba(0, 0, 0, 0.2); /* 点击时加深 */
}

.sheet-header {
  padding: 24rpx 32rpx; /* Page.PaddingX */
  border-bottom: 1rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
}

.sheet-title {
  font-size: 36rpx; /* H2 */
  font-weight: 600;
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 52rpx;
}

.sheet-close {
  width: 48rpx;
  height: 48rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background 200ms;
}

.sheet-close:active {
  background: rgba(0, 0, 0, 0.05);
}

.close-icon {
  width: 32rpx;
  height: 32rpx;
  opacity: 0.6;
}

/* 搜索栏 */
.search-wrapper {
  padding: 24rpx 32rpx; /* Page.PaddingX */
  background: #F7F8FA;
  width: 100%;
  box-sizing: border-box;
}

.search-box {
  background: #FFFFFF;
  border-radius: 12rpx; /* sm */
  padding: 0 24rpx;
  height: 80rpx; /* Search.Height */
  display: flex;
  align-items: center;
  gap: 16rpx;
  width: 100%;
  box-sizing: border-box;
}

.search-icon {
  width: 32rpx;
  height: 32rpx;
  flex-shrink: 0;
  opacity: 0.4;
}

.search-input {
  flex: 1;
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 44rpx;
  min-width: 0; /* 防止flex子元素溢出 */
}

/* Tab 切换 */
.tabs {
  display: flex;
  padding: 0 32rpx; /* Page.PaddingX */
  border-bottom: 1rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  width: 100%;
  box-sizing: border-box;
  background: #FFFFFF;
}

.tab-item {
  flex: 1;
  padding: 24rpx 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  transition: all 200ms;
}

.tab-text {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 44rpx;
  transition: all 200ms cubic-bezier(0.2,0,0,1);
}

.tab-item.active .tab-text {
  color: #4A8DD4; /* brand.primary */
  font-weight: 500;
}

.tab-indicator {
  position: absolute;
  bottom: 0;
  width: 64rpx;
  height: 4rpx; /* Tab.IndicatorHeight */
  background: #4A8DD4; /* brand.primary */
  border-radius: 2rpx;
}

/* 工单列表 */
.sheet-content {
  flex: 1;
  padding: 0 32rpx; /* Page.PaddingX */
  padding-top: 16rpx; /* 顶部间距 */
  overflow-y: auto;
  overflow-x: hidden;
  width: 100%;
  box-sizing: border-box;
  -webkit-overflow-scrolling: touch; /* iOS平滑滚动 */
  min-height: 0; /* 确保可滚动 */
}

.sheet-item {
  padding: 24rpx 0;
  border-bottom: 1rpx solid rgba(0, 0, 0, 0.08); /* line.divider */
  min-height: 96rpx; /* ListItem.MinHeight */
  width: 100%;
  box-sizing: border-box;
}

.sheet-item:last-child {
  border-bottom: none;
}

.sheet-item:active {
  background: rgba(0, 0, 0, 0.04);
  margin: 0 -32rpx;
  padding: 24rpx 32rpx;
  width: calc(100% + 64rpx);
}

.sheet-item.no-link {
  text-align: center;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.6);
}

.sheet-item-text {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.6); /* text.secondary */
  line-height: 44rpx;
}

.sheet-item-content {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
  width: 100%;
  overflow: hidden; /* 防止内容溢出 */
}

.sheet-item-row {
  display: flex;
  align-items: center;
  gap: 12rpx;
}

.sheet-item-no {
  font-size: 24rpx; /* Caption */
  color: #4A8DD4; /* 蓝色 */
  font-weight: 500;
}

.sheet-item-title {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.9); /* text.primary */
  line-height: 44rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
}

.sheet-item-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.sheet-item-caption {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.4); /* text.tertiary */
  line-height: 36rpx;
}

.sheet-item-time {
  font-size: 24rpx; /* Caption */
  color: rgba(0, 0, 0, 0.4); /* text.tertiary */
  line-height: 36rpx;
}

.sheet-empty {
  padding: 60rpx 0;
  text-align: center;
}

.sheet-empty-text {
  font-size: 28rpx; /* Body */
  color: rgba(0, 0, 0, 0.4); /* text.tertiary */
  line-height: 44rpx;
}

/* 左滑删除按钮 */
.swipe-delete-btn {
  width: 120rpx;
  height: 100%;
  background: #FF4444;
  display: flex;
  align-items: center;
  justify-content: center;
}

.swipe-delete-icon {
  width: 48rpx;
  height: 48rpx;
}