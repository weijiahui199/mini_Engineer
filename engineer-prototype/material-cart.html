<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>申领车</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: #f3f3f3;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        }
        
        /* TDesign 颜色 */
        .td-primary { color: #0052d9; }
        .td-primary-bg { background-color: #0052d9; }
        .td-success { color: #00a870; }
        .td-warning { color: #ed7b2f; }
        .td-error { color: #e34d59; }
        
        /* 滑动删除效果 */
        .swipe-item {
            position: relative;
            overflow: hidden;
        }
        
        .delete-btn {
            position: absolute;
            right: -80px;
            top: 0;
            bottom: 0;
            width: 80px;
            background: #e34d59;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: right 0.3s;
        }
        
        .swipe-item.swiped .delete-btn {
            right: 0;
        }
        
        /* 数量步进器 */
        .stepper-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        /* 底部结算栏 */
        .checkout-bar {
            background: white;
            border-top: 1px solid #e7e7e7;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.04);
        }
        
        /* 选择框样式 */
        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #d9d9d9;
            border-radius: 50%;
            position: relative;
            transition: all 0.2s;
        }
        
        .checkbox.checked {
            background: #0052d9;
            border-color: #0052d9;
        }
        
        .checkbox.checked::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 6px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        /* 空状态样式 */
        .empty-state {
            padding: 60px 20px;
            text-align: center;
        }
        
        .empty-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50 pb-32">
    <!-- 顶部导航栏 -->
    <div class="bg-white px-4 pt-12 pb-3 flex items-center justify-between sticky top-0 z-10">
        <div class="flex items-center">
            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            <h1 class="text-lg font-medium">申领车（3）</h1>
        </div>
        <button class="text-sm td-primary">管理</button>
    </div>

    <!-- 工单关联提示 -->
    <div class="bg-blue-50 px-4 py-3 flex items-center">
        <svg class="w-5 h-5 text-blue-600 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-sm text-blue-800">提交申领时可选择关联工单，方便耗材追踪</p>
    </div>

    <!-- 申领清单 -->
    <div class="px-4 py-4">
        <div class="mb-4">
            <div class="flex items-center">
                <div class="checkbox checked mr-3"></div>
                <span class="text-sm font-medium text-gray-700">全选</span>
            </div>
        </div>

        <!-- 申领项 1 -->
        <div class="bg-white rounded-lg mb-3 swipe-item">
            <div class="p-4">
                <div class="flex">
                    <div class="checkbox checked mr-3 mt-4"></div>
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Crect width='80' height='80' fill='%23f0f0f0' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-size='12'%3EA4纸%3C/text%3E%3C/svg%3E" 
                         class="w-20 h-20 rounded-lg object-cover mr-3">
                    <div class="flex-1">
                        <h3 class="font-medium text-gray-900">晨光A4复印纸</h3>
                        <p class="text-xs text-gray-500 mt-1">70g/500张 标准装</p>
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center text-sm text-gray-600">
                                <span>库存: 120包</span>
                            </div>
                            <div class="flex items-center">
                                <button class="stepper-btn bg-gray-100">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <input type="text" value="2" class="w-10 text-center mx-1 text-sm font-medium">
                                <button class="stepper-btn td-primary-bg text-white">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="delete-btn">删除</button>
        </div>

        <!-- 申领项 2 - 库存不足警告 -->
        <div class="bg-white rounded-lg mb-3 border-l-4 border-orange-500 swipe-item">
            <div class="p-4">
                <div class="flex">
                    <div class="checkbox checked mr-3 mt-4"></div>
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Crect width='80' height='80' fill='%23f0f0f0' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-size='12'%3E签字笔%3C/text%3E%3C/svg%3E" 
                         class="w-20 h-20 rounded-lg object-cover mr-3">
                    <div class="flex-1">
                        <h3 class="font-medium text-gray-900">得力中性笔</h3>
                        <p class="text-xs text-gray-500 mt-1">0.5mm黑色</p>
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center text-sm">
                                <span class="td-warning font-medium">库存仅剩: 8支</span>
                            </div>
                            <div class="flex items-center">
                                <button class="stepper-btn bg-gray-100">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <input type="text" value="5" class="w-10 text-center mx-1 text-sm font-medium">
                                <button class="stepper-btn td-primary-bg text-white">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <p class="text-xs td-warning mt-2">⚠️ 库存不足，建议减少申领数量</p>
                    </div>
                </div>
            </div>
            <button class="delete-btn">删除</button>
        </div>

        <!-- 申领项 3 -->
        <div class="bg-white rounded-lg mb-3 swipe-item">
            <div class="p-4">
                <div class="flex">
                    <div class="checkbox checked mr-3 mt-4"></div>
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Crect width='80' height='80' fill='%23f0f0f0' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-size='12'%3E墨盒%3C/text%3E%3C/svg%3E" 
                         class="w-20 h-20 rounded-lg object-cover mr-3">
                    <div class="flex-1">
                        <h3 class="font-medium text-gray-900">HP 803墨盒</h3>
                        <p class="text-xs text-gray-500 mt-1">黑色墨盒</p>
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center text-sm text-gray-600">
                                <span>库存: 15个</span>
                            </div>
                            <div class="flex items-center">
                                <button class="stepper-btn bg-gray-100">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <input type="text" value="1" class="w-10 text-center mx-1 text-sm font-medium">
                                <button class="stepper-btn td-primary-bg text-white">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="delete-btn">删除</button>
        </div>
    </div>

    <!-- 关联工单 -->
    <div class="bg-white px-4 py-4 mb-2">
        <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-medium text-gray-700">关联工单（可选）</h3>
            <span class="text-xs text-gray-500">便于成本追踪</span>
        </div>
        
        <!-- 当前选中的工单 -->
        <div id="selected-ticket" class="hidden">
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-2">
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="flex items-center">
                            <span class="text-sm font-medium text-gray-900">TK20250819002</span>
                            <span class="ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded">处理中</span>
                        </div>
                        <p class="text-xs text-gray-600 mt-1">打印机故障维修</p>
                        <p class="text-xs text-gray-500 mt-0.5">财务部 · 张经理</p>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 选择工单按钮 -->
        <button onclick="showTicketSelector()" class="w-full border border-gray-300 rounded-lg px-4 py-3 flex items-center justify-between text-left hover:bg-gray-50 transition-colors">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                </svg>
                <span class="text-sm text-gray-600">选择要关联的工单</span>
            </div>
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </button>
        
        <!-- 快速选择：我的处理中工单 -->
        <div class="mt-3">
            <p class="text-xs text-gray-500 mb-2">快速选择：</p>
            <div class="flex flex-wrap gap-2">
                <button class="px-3 py-1.5 bg-gray-100 text-xs rounded-full hover:bg-gray-200 transition-colors">
                    TK20250819002
                </button>
                <button class="px-3 py-1.5 bg-gray-100 text-xs rounded-full hover:bg-gray-200 transition-colors">
                    TK20250819005
                </button>
                <button class="px-3 py-1.5 bg-gray-100 text-xs rounded-full hover:bg-gray-200 transition-colors">
                    TK20250818012
                </button>
            </div>
        </div>
    </div>
    
    <!-- 工单选择器弹窗（默认隐藏） -->
    <div id="ticketSelector" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl" style="max-height: 70vh;">
            <!-- 弹窗头部 -->
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-medium">选择关联工单</h3>
                <button onclick="hideTicketSelector()" class="p-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- 搜索栏 -->
            <div class="p-4 border-b">
                <div class="relative">
                    <input type="text" placeholder="搜索工单号、客户或问题描述" 
                           class="w-full pl-10 pr-4 py-2 bg-gray-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
            
            <!-- 标签切换 -->
            <div class="flex border-b">
                <button class="flex-1 py-3 text-sm font-medium text-blue-600 border-b-2 border-blue-600">
                    我的工单
                </button>
                <button class="flex-1 py-3 text-sm text-gray-600">
                    最近工单
                </button>
                <button class="flex-1 py-3 text-sm text-gray-600">
                    全部工单
                </button>
            </div>
            
            <!-- 工单列表 -->
            <div class="overflow-y-auto" style="max-height: 40vh;">
                <!-- 不关联选项 -->
                <div class="px-4 py-3 border-b hover:bg-gray-50">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="ticket" value="" class="mr-3">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-600">不关联工单</p>
                            <p class="text-xs text-gray-400">独立申领，不计入工单成本</p>
                        </div>
                    </label>
                </div>
                
                <!-- 工单项 1 - 处理中 -->
                <div class="px-4 py-3 border-b hover:bg-gray-50">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="ticket" value="TK20250819002" class="mr-3">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-gray-900">TK20250819002</span>
                                <span class="ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded">处理中</span>
                            </div>
                            <p class="text-xs text-gray-600 mt-0.5">打印机故障维修</p>
                            <p class="text-xs text-gray-400 mt-0.5">财务部 · 张经理 · 今天 10:30</p>
                        </div>
                    </label>
                </div>
                
                <!-- 工单项 2 - 处理中 -->
                <div class="px-4 py-3 border-b hover:bg-gray-50">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="ticket" value="TK20250819005" class="mr-3">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-gray-900">TK20250819005</span>
                                <span class="ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded">处理中</span>
                            </div>
                            <p class="text-xs text-gray-600 mt-0.5">网络连接异常</p>
                            <p class="text-xs text-gray-400 mt-0.5">IT部 · 李工 · 今天 14:20</p>
                        </div>
                    </label>
                </div>
                
                <!-- 工单项 3 - 待处理 -->
                <div class="px-4 py-3 border-b hover:bg-gray-50">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="ticket" value="TK20250818012" class="mr-3">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-gray-900">TK20250818012</span>
                                <span class="ml-2 px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded">待处理</span>
                            </div>
                            <p class="text-xs text-gray-600 mt-0.5">办公软件安装</p>
                            <p class="text-xs text-gray-400 mt-0.5">人事部 · 王主管 · 昨天 16:45</p>
                        </div>
                    </label>
                </div>
                
                <!-- 工单项 4 - 已暂停 -->
                <div class="px-4 py-3 border-b hover:bg-gray-50">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="ticket" value="TK20250817008" class="mr-3">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-gray-900">TK20250817008</span>
                                <span class="ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded">已暂停</span>
                            </div>
                            <p class="text-xs text-gray-600 mt-0.5">服务器维护</p>
                            <p class="text-xs text-gray-400 mt-0.5">技术部 · 赵总监 · 3天前</p>
                        </div>
                    </label>
                </div>
            </div>
            
            <!-- 确认按钮 -->
            <div class="p-4 border-t">
                <button onclick="confirmTicketSelection()" class="w-full td-primary-bg text-white py-2.5 rounded-lg text-sm font-medium">
                    确认选择
                </button>
            </div>
        </div>
    </div>
    
    <script>
        function showTicketSelector() {
            document.getElementById('ticketSelector').classList.remove('hidden');
        }
        
        function hideTicketSelector() {
            document.getElementById('ticketSelector').classList.add('hidden');
        }
        
        function confirmTicketSelection() {
            // 这里处理选择确认逻辑
            document.getElementById('selected-ticket').classList.remove('hidden');
            hideTicketSelector();
        }
    </script>

    <!-- 备注 -->
    <div class="bg-white px-4 py-4 mb-2">
        <h3 class="text-sm font-medium text-gray-700 mb-3">备注信息</h3>
        <textarea rows="3" placeholder="请输入备注信息（选填）" 
                  class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm resize-none focus:outline-none focus:border-blue-500"></textarea>
    </div>

    <!-- 申领须知 -->
    <div class="px-4 py-4">
        <div class="bg-yellow-50 rounded-lg p-4">
            <h4 class="text-sm font-medium text-yellow-900 mb-2">申领须知</h4>
            <ul class="text-xs text-yellow-800 space-y-1">
                <li>• 申领提交后将直接从库存扣减，无需审批</li>
                <li>• 请按实际需求申领，避免浪费</li>
                <li>• 贵重耗材请妥善保管，遗失需说明原因</li>
                <li>• 如有特殊需求，请在备注中说明</li>
            </ul>
        </div>
    </div>

    <!-- 底部结算栏 -->
    <div class="checkout-bar fixed bottom-0 left-0 right-0 px-4 py-3">
        <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-gray-600">申领汇总</span>
            <div class="text-right">
                <p class="text-sm text-gray-900">共 3 种耗材</p>
                <p class="text-xs text-gray-500">合计 8 件</p>
            </div>
        </div>
        <div class="flex space-x-3">
            <button class="flex-1 py-2.5 border border-gray-300 rounded-full text-sm">
                继续添加
            </button>
            <button class="flex-1 td-primary-bg text-white py-2.5 rounded-full text-sm font-medium">
                提交申领
            </button>
        </div>
    </div>

    <!-- 空状态（隐藏，仅作展示） -->
    <div class="empty-state hidden">
        <div class="empty-icon">
            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
        </div>
        <h3 class="text-lg font-medium text-gray-900 mb-2">申领车为空</h3>
        <p class="text-sm text-gray-500 mb-6">还没有添加任何耗材</p>
        <button class="td-primary-bg text-white px-6 py-2 rounded-full text-sm">
            去选择耗材
        </button>
    </div>
</body>
</html>